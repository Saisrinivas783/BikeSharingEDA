---
# This is the YAML header/metadata for the document
title: "Bike Share Chronicles_Unveiling Patterns"
author's: "1) Lakshmi Sreya Rapolu 2) Ashwin Muthuraman 3) Sai Srinivas Lakkoju "
# date: "today"
date: "`r Sys.Date()`" 
# this style requires installing rmdformats package 
output:  
    rmdformats::readthedown:
      toc_float: true
      toc_depth: 3
      number_sections: true
      code_folding: hide
      includes:
        before_body: header.tmphtml
---




```{r setup, include=FALSE}
# some of common options (and the defaults) are: 
# include=T, eval=T, echo=T, results='hide'/'asis'/'markup',..., collapse=F, warning=T, message=T, error=T, cache=T, fig.width=6, fig.height=4, fig.dim=c(6,4) #inches, fig.align='left'/'center','right', 
 knitr::opts_chunk$set(warning = F, results = "markup", message = F)
#knitr::opts_chunk$set(warning = F, results = "hide", message = F)

# knitr::opts_chunk$set(include = F)
# knitr::opts_chunk$set(echo = TRUE)
options(scientific=T, digits = 3) 
# options(scipen=9, digits = 3) 
# ‘scipen’: integer. A penalty to be applied when deciding to print numeric values in fixed or exponential notation.  Positive values bias towards fixed and negative towards scientific notation: fixed notation will be preferred unless it is more than ‘scipen’ digits wider.
# use scipen=999 to prevent scientific notation at all times
```

# Introduction

Bike sharing programs are gaining popularity worldwide because they are environmentally friendly and healthy. Cities are developing bike sharing programs to encourage people to ride bicycles.

Riders can rent bikes from manual or automated stations throughout the city for a set period of time. Riders can typically pick up bikes from one location and return them to another designated location.

Bike sharing programs generate a lot of data, such as travel time, start and end locations, and rider demographics. This data can be combined with other sources of information, such as weather,holiday and season, to learn more about how and when people use bike sharing programs.

## Problem Statement

The goal of this case is to perform Exploratory Data Analysis (EDA) on daily bike rental counts, considering environmental and seasonal variables. This EDA aims to understand the historical usage patterns of a bike-sharing program in Washington, D.C., in relation to weather, environmental factors, and other data. We are interested in exploring the relationships between bike rentals and various factors such as season, temperature, and weather conditions. Our objective is to build insights and understanding from the data 

## Data

This dataset consists around 17,000 records, offering comprehensive details about the rental activity of 
bikes on both an hourly and daily basis throughout the years 2011 and 2012 within the Capital Bikeshare 
system. Furthermore, it encompasses relevant data concerning the prevailing weather conditions and 
the specific seasons that characterized this time frame.

## Dataset characteristics

Both hour.csv and day.csv have the following fields, except hr which is not available in day.csv

1. **instant**: A unique identifier for each record in the dataset.

2. **dteday**: The date of the bike rental.

3. **season**: The season in which the bike rental took place (1: spring, 2: summer, 3: fall, 4: winter).

4. **yr**: The year in which the bike rental took place (0: 2011, 1: 2012).

5. **mnth**: The month in which the bike rental took place (1: January to 12: December).

6. **hr**: The hour of the day in which the bike rental took place (0 to 23).

7. **holiday**: Whether the day of the bike rental was a holiday or not (0: Not Holiday, 1: Holiday).

8. **weekday**: The day of the week in which the bike rental took place (0: Sunday to 6: Saturday).

9. **workingday**: Whether the day of the bike rental was a workday or not (0: Not Working day, 1: Working Day).

10. **weathersit**: The weather condition on the day of the bike rental:
    - 1: Clear, Few clouds, Partly cloudy, Partly cloudy
    - 2: Mist + Cloudy, Mist + Broken clouds, Mist + Few clouds, Mist
    - 3: Light Snow, Light Rain + Thunderstorm + Scattered clouds, Light Rain + Scattered clouds
    - 4: Heavy Rain + Ice Pallets + Thunderstorm + Mist, Snow + Fog.

11. **temp**: The Normalized temperature in Celsius on the day of the bike rental. The values are divided to 41 (max).

12. **atemp**: The Normalized feeling temperature in Celsius on the day of the bike rental. The values are divided to 67 (max).

13. **hum**: The Normalized humidity on the day of the bike rental. The values are divided to 100 (max).

14. **windspeed**: The Normalized wind speed in meters per second on the day of the bike rental. The values are divided to 67 (max).

15. **casual**: The number of casual users who rented bikes on the day of the bike rental.

16. **registered**: The number of registered users who rented bikes on the day of the bike rental.

17. **cnt**: The total number of users who rented bikes on the day of the bike rental (Casual + Registered).

## Libraries

```{r init, include=T}
#Libraries Used
library(ggplot2)
library(dplyr)
library(scales)
library(gridExtra)
library(grid)

```
The purpose of each library we've used

1. `ggplot2`: Used for creating visually appealing and customizable data visualizations and plots.

2. `dplyr`: Employed for data manipulation and transformation tasks, such as filtering, summarizing, and grouping data.

3. `scales`: Provides functions for scaling data and formatting labels in plots to make them more interpretable.

4. `gridExtra`: Utilized for combining multiple plots or arranging them in a grid layout within a single visual.

5. `grid`: An underlying graphics package that allows for advanced customization and control over the layout and appearance of plots.


## Data Pre-Processing
**File Reading**
```{r, echo=TRUE}
bike_df <- read.csv("hour.csv")
dimensions<-dim(bike_df)
```
The Dimensions of our Data Set are `r {dimensions}`.

**Data Overview**
```{r}
head(bike_df, 5)
```
**Data Types**

```{r}
sapply(bike_df, class)
```

By look of this we can enhance the clarity and comprehensibility of the data, by renaming all the columns and Converting integer-type attributes like 'Season,' 'Year,' 'Month,' 'Hour,' 'Holiday,' 'Weekday,' and 'Workingday' into categorical variables.

**Enchancing data**
In our meticulous data refinement process, we embarked on a transformative journey of renaming the columns, breathing new life into our dataset:

**Renaming The Columns**
This transformation ensures that our dataset is not just a collection of numbers and characters but a rich ensemble of meaningful, categorized attributes, setting the stage for in-depth analysis and insights. Each attribute, meticulously redefined, narrates a unique tale, contributing to the vibrant tapestry of our data exploration.
```{r}
names(bike_df) <- c('Instant','Date','Season','Year','Month','Hour','Holiday','Weekday','Workingday','Weather_condition','Temperature','Feelslike_temp','Humidity','Windspeed','Casual','Registered','Total_count')

head(bike_df)

```
**Converting to Factors**

```{r}
categorical_col <- c('Season', 'Year', 'Month', 'Hour', 'Holiday', 'Weekday', 'Workingday', 'Weather_condition')
bike_df[, categorical_col] <- lapply(bike_df[, categorical_col], factor)
sapply(bike_df, class)

```

**Nulls Handling**

```{r}

null_check <- colSums(is.na(bike_df))
null_check
```
No missing values were found in our dataset, ensuring its completeness and integrity. This solid foundation allows confident analysis, leaving no room for uncertainty.

#EDA
In conducting Exploratory Data Analysis (EDA) for the bike sharing dataset, the process began with loading and inspecting the data, gaining an initial understanding of the variables and their formats. An evaluation for missing values and an assessment of data types, including integers, floats, and objects, were conducted to ensure data quality.
Outlier detection techniques, primarily utilizing box plots, were employed to identify outliers. We used histograms, pie charts and scatter plots to identify patterns and relationships between features.
For more in-depth analysis, statistical testing method - ANOVA was applied to validate hypotheses concerning various variables. Throughout the process, an iterative approach was maintained, allowing for revisits to earlier analyses based on new insights or questions that arose during the exploration.
In conclusion, the EDA process yielded valuable insights into the dataset. Patterns, correlations, and trends were identified, providing a solid foundation for formulating hypotheses for subsequent investigations or modeling endeavors. EDA, being an iterative process, allows for continuous refinement and exploration as new questions and areas of interest emerge

##What Are the Year-wise Distribution Patterns of Casual and Registered Bike Sharing Users?


# Tests

```{r}
#Effect of Holiday On Casual Users
casual_holiday = aov(Casual ~ Holiday, data = bike_df)
casual__holidaysummary = summary(casual_holiday)
casual__holidaysummary
```

From the ANOVA above analysis with the "Holiday" variable revealed a highly significant effect. There are statistically significant differences in the response variable between holidays and non-holidays, as indicated by the low p-value (3.2e-05) and the F-value of 17.3. This suggests that the "Holiday" variable has a substantial impact on the response variable.

```{r}
#Effect of Working Day on Registered Users
Registered_workingday = aov(Registered ~ Workingday, data = bike_df)
Registered_workingday = summary(Registered_workingday)
Registered_workingday
```

From the above ANOVA analysis involving the "Workingday" variable indicates a highly significant effect. There are substantial and statistically significant differences in the response variable between working days and non-working days, as evident from the very low p-value (<2e-16) and a substantial F-value of 319. These results suggest that the "Workingday" variable significantly impacts the response variable.

```{r}
#Hour Vs Casual Count

bike_df$Hour <- as.numeric(as.character(bike_df$Hour))
#Because 'Estimated effects may be unbalanced'
# Create a new variable to group hours
bike_df <- bike_df %>%
  mutate(TimeOfDay = case_when(
    Hour >= 6 & Hour < 12 ~ "Morning",
    Hour >= 12 & Hour < 18 ~ "Afternoon",
    TRUE ~ "Evening"
  ))
unique(bike_df$TimeOfDay)
time_of_day_anova <- aov(Casual ~ TimeOfDay, data = bike_df)
time_of_day_summary <- summary(time_of_day_anova)
time_of_day_summary
```

The above ANOVA analysis involving the "TimeOfDay" variable reveals a highly significant effect. There are substantial and statistically significant differences in the response variable across different times of the day. The very low p-value (<2e-16) and a substantial F-value of 2174 indicate that the "TimeOfDay" variable significantly impacts the response variable(Casual User Count).

```{r}
time_of_day_anova_R <- aov(Registered ~ TimeOfDay, data = bike_df)
time_of_day_summary_R <- summary(time_of_day_anova_R)
time_of_day_summary_R
```

The above ANOVA analysis involving the "TimeOfDay" variable reveals a highly significant effect. There are substantial and statistically significant differences in the response variable across different times of the day. The very low p-value (<2e-16) and a substantial F-value of 1047 indicate that the "TimeOfDay" variable significantly impacts the response variable(Registered User Count)

```{r}
#Day Of the week Vs Casual
day_of_the_week_anova_c <- aov(Casual ~ Weekday, data = bike_df)
day_of_the_week_summary_C <- summary(day_of_the_week_anova_c)
day_of_the_week_summary_C
```

The ANOVA analysis involving the "Weekday" variable demonstrates a highly significant effect. There are substantial and statistically significant differences in the response variable across different days of the week. The very low p-value (<2e-16) and a substantial F-value of 294 indicate that the "Weekday" variable significantly impacts the response variable(Casual User count).

```{r}
#Day Of the week Vs Registered

day_of_the_week_anova_r <- aov(Registered ~ Weekday, data = bike_df)
day_of_the_week_summary_r <- summary(day_of_the_week_anova_r)
day_of_the_week_summary_r
```

The ANOVA analysis for the "Weekday" variable indicates a highly significant effect on the response variable. There are substantial and statistically significant differences in the response variable across different days of the week. The very low p-value (<2e-16) and a substantial F-value of 46.1 suggest that the "Weekday" variable significantly impacts the response variable(Registered User Count).

```{r}

```
